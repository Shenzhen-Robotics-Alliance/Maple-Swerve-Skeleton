
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://shenzhen-robotics-alliance.github.io/Maple-Swerve-Skeleton/technical%20specification/3%20-%20heading%20control/3.2%20-%20aiming%20at%20target/">
      
      
        <link rel="prev" href="../3.1%20-%20face%20to%20rotation/">
      
      
        <link rel="next" href="../../4%20-%20apriltag%20auto%20alignment/4.1%20-%20path%20finding/">
      
      
      <link rel="icon" href="../../../media/team_logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>3.2 Aim at Target - Maple Swerve Skeleton</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M6 13h8l-3.5 3.5 1.42 1.42L17.84 12l-5.92-5.92L10.5 7.5 14 11H6z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#algorithm-explain" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Maple Swerve Skeleton" class="md-header__button md-logo" aria-label="Maple Swerve Skeleton" data-md-component="logo">
      
  <img src="../../../media/team_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Maple Swerve Skeleton
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3.2 Aim at Target
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="pink"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Maple Swerve Skeleton" class="md-nav__button md-logo" aria-label="Maple Swerve Skeleton" data-md-component="logo">
      
  <img src="../../../media/team_logo.png" alt="logo">

    </a>
    Maple Swerve Skeleton
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Technical Specification
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Technical Specification
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    1 Robot Localization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            1 Robot Localization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1%20-%20robot%20localization/1.1%20-%20odometry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 Odometry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1%20-%20robot%20localization/1.2%20-%20vision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 Vision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../1%20-%20robot%20localization/1.3%20-%20combining%20vision%20and%20odometry%20observations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 Combining Vision and Odometry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    2 Drivetrain Control
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            2 Drivetrain Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2%20-%20drivetrain%20control/2.1%20running%20drivetrain%20characterizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.1 Running Drivetrain Characterization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2%20-%20drivetrain%20control/2.2%20fine-tuning%20the%20gains/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.2 Fine-tuning the Gains
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../2%20-%20drivetrain%20control/2.3%20implementing%20module%20forces%20feedforward/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2.3 Implementing Module Forces Feedforwards
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    3 Heading Control
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            3 Heading Control
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.1%20-%20face%20to%20rotation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 Face to Rotation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    3.2 Aim at Target
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    3.2 Aim at Target
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feedforward-angular-speed-for-face-to-target-control" class="md-nav__link">
    <span class="md-ellipsis">
      Feedforward Angular Speed for Face-To-Target Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feedforward Angular Speed for Face-To-Target Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-calculate-targets-velocity-relative-to-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      1. Calculate Target's Velocity Relative to the Robot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-calculate-targets-desired-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      2. Calculate Target's Desired Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-calculate-targets-moving-direction" class="md-nav__link">
    <span class="md-ellipsis">
      3. Calculate Target's Moving Direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-calculate-the-perpendicular-tangent-direction" class="md-nav__link">
    <span class="md-ellipsis">
      4. Calculate the Perpendicular Tangent Direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-calculate-tangential-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      5. Calculate Tangential Velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-calculate-the-distance-to-the-target" class="md-nav__link">
    <span class="md-ellipsis">
      6. Calculate the Distance to the Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-feedforward-angular-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      7. Feedforward Angular Velocity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    4 Apriltag Auto Alignment
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            4 Apriltag Auto Alignment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4%20-%20apriltag%20auto%20alignment/4.1%20-%20path%20finding/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1 Path Finding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../4%20-%20apriltag%20auto%20alignment/4.2%20-%20precise%20alginment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.2 Precise Alignment
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Usages
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Usages
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/1%20-%20getting%20started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/2%20-%20generating%20constants%20using%20phoenix%20tuner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Calibrating your Drivetrain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/3%20-%20running%20drivetrain%20characterizations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Running Drive Characterizations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/4%20-%20setting%20up%20vision/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 Setting Up Vision
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/5%20-%20using%20drivetrain%20commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Using Drive Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/6%20-%20running%20code%20in%20simulator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Testing Code in Simulation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/7%20-%20debugging%20with%20log-replay/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7 Debugging with Log-Replay Technology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../usage/help%20and%20support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help & Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#feedforward-angular-speed-for-face-to-target-control" class="md-nav__link">
    <span class="md-ellipsis">
      Feedforward Angular Speed for Face-To-Target Control
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Feedforward Angular Speed for Face-To-Target Control">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-calculate-targets-velocity-relative-to-the-robot" class="md-nav__link">
    <span class="md-ellipsis">
      1. Calculate Target's Velocity Relative to the Robot
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-calculate-targets-desired-rotation" class="md-nav__link">
    <span class="md-ellipsis">
      2. Calculate Target's Desired Rotation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-calculate-targets-moving-direction" class="md-nav__link">
    <span class="md-ellipsis">
      3. Calculate Target's Moving Direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-calculate-the-perpendicular-tangent-direction" class="md-nav__link">
    <span class="md-ellipsis">
      4. Calculate the Perpendicular Tangent Direction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-calculate-tangential-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      5. Calculate Tangential Velocity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-calculate-the-distance-to-the-target" class="md-nav__link">
    <span class="md-ellipsis">
      6. Calculate the Distance to the Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-feedforward-angular-velocity" class="md-nav__link">
    <span class="md-ellipsis">
      7. Feedforward Angular Velocity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="algorithm-explain">Algorithm Explain:</h1>
<h2 id="feedforward-angular-speed-for-face-to-target-control">Feedforward Angular Speed for Face-To-Target Control</h2>
<p>To ensure the robot faces the target while moving, a closed-loop control system is required to continuously adjust the robot's heading towards the target. However, because the robot is constantly in motion, there will always be a delay in the response of the PID controller. This delay can cause the robot to lag behind the desired heading. To compensate for this, a feed-forward angular velocity is introduced, which proactively adjusts the robot's rotation based on its speed and direction, helping to reduce the delay and improve the robot's ability to maintain its alignment with the target in real-time.</p>
<p>In brief, given the target's position, the robot's position, and its velocity, we calculate the rate of change of the robot's desired rotation to maintain alignment with the target.</p>
<p><img alt="alt text" src="../face%20to%20target.png" /></p>
<h4 id="1-calculate-targets-velocity-relative-to-the-robot">1. <strong>Calculate Target's Velocity Relative to the Robot</strong></h4>
<p>First, the target's velocity relative to the robot is calculated in the field-origin frame. This is based on the measured chassis velocities:</p>
<div class="arithmatex">\[
\mathbf{v}_{\text{target relative}} = (-v_{x}, -v_{y})
\]</div>
<p>Where:
- <span class="arithmatex">\( v_x \)</span> and <span class="arithmatex">\( v_y \)</span> are the field-relative velocities of the robot in the x and y directions.</p>
<h4 id="2-calculate-targets-desired-rotation">2. <strong>Calculate Target's Desired Rotation</strong></h4>
<p>The rotation needed to face the target is computed based on the target's position relative to the robot. If <code>shooterOptimization</code> is not provided, the robot should directly face the target’s position:</p>
<div class="arithmatex">\[
\theta_{\text{target}} = \text{atan2}(y_{\text{target}} - y_{\text{robot}}, x_{\text{target}} - x_{\text{robot}})
\]</div>
<p>Alternatively, if <code>shooterOptimization</code> is provided, the desired facing direction is determined by the optimization algorithm:</p>
<div class="arithmatex">\[
\theta_{\text{target}} = \text{ShooterFacing}(x_{\text{target}}, y_{\text{target}}, x_{\text{robot}}, y_{\text{robot}}, \mathbf{v}_{\text{robot}})
\]</div>
<p>Where <span class="arithmatex">\( \theta_{\text{target}} \)</span> represents the desired rotational angle to face the target.</p>
<h4 id="3-calculate-targets-moving-direction">3. <strong>Calculate Target's Moving Direction</strong></h4>
<p>The target’s moving direction is calculated from the target’s relative velocity:</p>
<div class="arithmatex">\[
\theta_{\text{moving}} = \text{Angle of}(\mathbf{v}_{\text{target relative}})
\]</div>
<h4 id="4-calculate-the-perpendicular-tangent-direction">4. <strong>Calculate the Perpendicular Tangent Direction</strong></h4>
<p>The perpendicular direction to the target's movement is computed by rotating the target's facing direction by <span class="arithmatex">\(90^\circ\)</span>:</p>
<div class="arithmatex">\[
\theta_{\text{perpendicular}} = \theta_{\text{target}} + 90^\circ
\]</div>
<h4 id="5-calculate-tangential-velocity">5. <strong>Calculate Tangential Velocity</strong></h4>
<p>The tangential velocity is calculated based on the cosine of the angle between the target's moving direction and the perpendicular tangent direction:</p>
<div class="arithmatex">\[
v_{\text{tangent}} = \|\mathbf{v}_{\text{target relative}}\| \cdot \cos(\theta_{\text{moving}} - \theta_{\text{perpendicular}})
\]</div>
<p>Where:
- <span class="arithmatex">\( \|\mathbf{v}_{\text{target relative}}\| \)</span> is the magnitude (norm) of the target's velocity vector.</p>
<h4 id="6-calculate-the-distance-to-the-target">6. <strong>Calculate the Distance to the Target</strong></h4>
<p>The distance between the robot and the target is computed:</p>
<div class="arithmatex">\[
d_{\text{target}} = \|\mathbf{p}_{\text{target}} - \mathbf{p}_{\text{robot}}\|
\]</div>
<p>Where <span class="arithmatex">\( \mathbf{p}_{\text{target}} \)</span> and <span class="arithmatex">\( \mathbf{p}_{\text{robot}} \)</span> are the positions of the target and the robot, respectively.</p>
<h4 id="7-feedforward-angular-velocity">7. <strong>Feedforward Angular Velocity</strong></h4>
<p>The feedforward angular velocity required to align with the target is calculated by dividing the tangential velocity by the distance to the target:</p>
<div class="arithmatex">\[
\omega_{\text{feedforward}} = \frac{v_{\text{tangent}}}{d_{\text{target}}}
\]</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../3.1%20-%20face%20to%20rotation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 3.1 Face to Rotation">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                3.1 Face to Rotation
              </div>
            </div>
          </a>
        
        
          
          <a href="../../4%20-%20apriltag%20auto%20alignment/4.1%20-%20path%20finding/" class="md-footer__link md-footer__link--next" aria-label="Next: 4.1 Path Finding">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                4.1 Path Finding
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate", "content.code.select.title", "toc.follow", "content.tabs.link", "search.share", "search.highlight", "search.suggest", "announce.dismiss", "navigation.instant", "navigation.footer"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="../../../javascripts/tex-mml-chtml.js"></script>
      
    
  </body>
</html>